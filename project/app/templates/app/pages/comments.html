{% extends 'app/pages/base.html' %}
{% load app_tags %}

{% block metatags %}
  <link href="https://unpkg.com/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
  <script src="https://unpkg.com/cloudinary-core/cloudinary-core-shrinkwrap.min.js" type="text/javascript"></script>
  <script src="https://unpkg.com/cloudinary-video-player/dist/cld-video-player.min.js" type="text/javascript"></script>
{% endblock metatags %}


{% block title %}Comments{% endblock title %}

{% block content %}

  <section class='my-5'>
    <h2>
      Public Comments
    </h2>
  </section>
  <section class='my-5'>
    <div class='col-lg-8'>
      <p class='lead'>
        Following are public comments submitted by Smile West Ada members.
      </p>
      <p>
        Note that this site is not a substitute for official Public Comment before the Board of Trustees; they are simply provided as a courtesy to our members to make their voice heard.  We will post all on-topic, respectful comments regardless of position.  If you'd like to add your voice to these, <a href='{% url "submit" %}'>click here</a>.
      </p>
    </div>
  </section>

  <section>
    <table class='table'>
      <thead>
        <tr>
          <th>Comment</th>
          <th>Name</th>
        </tr>
      </thead>
      <tbody>
        {% for comment in comments %}
        <tr>
          <td>
            <div class='col-md-3'>
              <video
                id="{{comment.id}}"
                controls
                autoplay
                data-cld-public-id="{{comment.cld_public_id}}"
                class="cld-video-player cld-video-player-skin-dark cld-fluid">
              </video>
            </div>
          </td>
          <td>{{comment.name}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock content %}

{% block scripts %}
  <script>
    let cld = cloudinary.Cloudinary.new({
      cloud_name: '{% get_env_var "CLOUDINARY_NAME" %}',
      secure: true
    });
    // Global Config
    // let player = cld.videoPlayer('example-player', {
    //   bigPlayButton: false,
    // });
    // // Instance Config
    // player.source('smilewestada-dev/videos/testvideo', {
    //   posterOptions: {transformation: {effect: ['sepia']}}
    // });
    var players = cld.videoPlayers(
      '.cld-video-player',
    );
  </script>
{% endblock scripts %}
